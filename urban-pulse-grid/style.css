:root{
  --bg:#0b0d10;
  --fg:#f6f7f9;
  --muted:#9aa4b2;
  --panel:#10151b;
  --border:#1d2430;
  --turq:#45e2d1;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font:15px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid var(--border);background:var(--panel);position:sticky;top:0;z-index:20}
.brand{font-weight:700}
.controls{display:flex;gap:10px;align-items:center}
button{background:transparent;border:1px solid var(--border);color:var(--fg);padding:6px 10px;border-radius:10px;cursor:pointer}
.hint{color:var(--muted);font-size:13px}
.layout{display:grid;grid-template-columns:1fr 320px;height:calc(100vh - 52px)}
#map{width:100%;height:100%}
.panel{border-left:1px solid var(--border);background:var(--panel);padding:12px;overflow:auto}
.panel h2{margin:10px 0 6px;font-size:14px;color:var(--turq)}
.muted{color:var(--muted)}

.leaflet-container{background:#0d1117}
.leaflet-control-zoom a{background:var(--panel);color:var(--fg);border-color:var(--border)}

/* Animated line style: thin, fade-in, flashing glow; gradient set via SVG defs */
.grid-line{
  stroke-width: 0.8;
  stroke-linecap: square;
  stroke-opacity: 0;               /* start invisible */
  animation: fadeIn 2.2s ease forwards, flash 6s linear infinite;
  animation-delay: var(--delay, 0s);
}

@keyframes fadeIn{
  0%{ stroke-opacity: 0; }
  100%{ stroke-opacity: 0.95; }
}

@keyframes flash{
  0%{ filter: drop-shadow(0 0 0 rgba(69,226,209,0)); }
  50%{ filter: drop-shadow(0 0 6px rgba(69,226,209,.35)); }
  100%{ filter: drop-shadow(0 0 0 rgba(69,226,209,0)); }
}

/* optional light cell outlines for clicks */
.cell-rect{
  fill: transparent;
  stroke: rgba(255,255,255,0.12);
  stroke-width: 0.6;
}

@media (max-width:920px){.layout{grid-template-columns:1fr} .panel{height:40vh;order:-1}}
